# Design Document

Our implementation contains these files:
- Book.java
The implementation of class Book, which contains all the information we need about a book, including the book's id, title, stock, price and topic. And these information could be accessed and modified properly.

- FrontEndServer.java
- CatalogServer.java
- OrderServer.java
The implementation of the frontend server, catalog server and order server, which could handle three types of requests: search(topic)，lookup(item_number) and buy(item_number).

- Client.java
Make multiple buy requests on different book randomly.

================================================================================

The program mainly consists of three parts:
- Frontend server
- Catalog Server
- Order Server

The catalog server stores the data of each book.

The frontend server receives three different requests from client: search(topic)，lookup(item_number) and buy(item_number).

When the frontend server receives a search or lookup request, it will try to connect with the catalog server and let it return the information of the topic or item.

When the frontend server receives a buy request, it will firstly reach out to the order server, and then the order server will try to make a request to the catalog server.

If the catalog server finds that the stock of this book is positive, it will decrement the stock, and the order server will give a "success" message to the frontend server; otherwise, the order server will return a "fail" message to the frontend server.

If there are n >= SOLD_OUTS types of book are sold out, we reset the stock of these sold-out books to be STOCK_NUM.

In our implementation, we set SOLD_OUTS = 2 and STOCK_NUM = 2.

To keep track of the stock and order information, we create two separate .csv files in ../test/: 

- stock1.csv, stock2.csv, stock3.csv
- order.csv

When catalog server is initiated, it will read stock.csv and load the stock. Whenever we updated the stock of one book, catalog server will re-write stock.csv. It could guarantee consistency, but a little bit redundunt - because we re-write the whole file but only one tiny spot is modified.

Whenever an order is made, the order server will append the information of this order to order.csv

The output generated by Client.java is stored in docs/output.txt, docs/100Request.txt, docs/1000Request.txt
